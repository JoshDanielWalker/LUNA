name: "Version"	

on:	
  push:	
    branches:	
      - "master"	   
      - "release"	
      - "release/**"	

jobs:	
  bump-version:	
    name: "Version"	
    runs-on: ubuntu-latest	
    steps:	
      - name: "Checkout source code"	
        uses: "actions/checkout@master"	
        with:	
          ref: ${{ github.ref }}	
      - name: "Submodules"	
        uses: snickerbockers/submodules-init@v4	
      - name: 'Get Previous Tag'
        id: previoustag
        uses: "WyriHaximus/github-action-get-previous-tag@master"
        env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
      - name: 'Get next minor version'
        id: semvers
        uses: "WyriHaximus/github-action-next-semvers@master"
        with:
          version: ${{ steps.previoustag.outputs.tag }}
      - name: 'Create New Milestone'
        id: createmilestone
        uses: "WyriHaximus/github-action-create-milestone@master"
        with:
          title: ${{ steps.semvers.outputs.patch }}
        env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
